<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Listagem de Itens</title>
  <!-- Bulma CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.0/css/bulma.min.css">
  <!-- Bulma Dark Theme -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.0/css/bulma-dark.min.css">
</head>
<body>
  <div id="app" class="container">
    <h1 class="title is-4 has-text-light mt-5 mb-4">Lista de Itens</h1>
    <div class="columns is-multiline">
      <div v-for="obra in obras" :key="obra.ObraID" class="column is-one-third">
        <div class="card">
          <div class="card-content">
            <p class="title is-5 has-text-light">{{ obra.nome }}</p>
            <p class="has-text-light">ID: {{ obra.ObraID }}</p>
            <button class="button is-success" @click="mostrarDetalhes(obra)">Mais informações</button>
          </div>
        </div>
      </div>
    </div>
    <!-- Popup de informações extras -->
    <div :class="['modal', mostrarPopup ? 'is-active' : '']">
      <div class="modal-background"></div>
      <div class="modal-card">
        <header class="modal-card-head">
          <p class="modal-card-title">Informações extras</p>
          <button class="delete" aria-label="close" @click="fecharPopup"></button>
        </header>
        <section class="modal-card-body">
          <p><strong>Nome:</strong> {{ obraSelecionada.nome }}</p>
          <p><strong>ID:</strong> {{ obraSelecionada.ObraID }}</p>
          <p><strong>Categoria:</strong> {{ obraSelecionada.categoria }}</p>
        </section>
      </div>
    </div>
  </div>

  <!-- Vue.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.min.js"></script>
  <!-- Axios CDN -->
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

  <script>
    new Vue({
      el: '#app',
      data: {
        obras: [],
        mostrarPopup: false,
        obraSelecionada: {}
      },
      mounted() {
        this.carregarObras();
      },
      methods: {
        async carregarObras() {
          try {
            const response = await axios.get('http://localhost:3000/obras');
            this.obras = response.data;
          } catch (error) {
            console.error('Erro ao carregar obras:', error);
          }
        },
        mostrarDetalhes(obra) {
          this.obraSelecionada = obra;
          this.mostrarPopup = true;
        },
        fecharPopup() {
          this.mostrarPopup = false;
        }
      }
    });
  </script>
</body>
</html>
